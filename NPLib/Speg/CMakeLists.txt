add_custom_command(OUTPUT TSpegPhysicsDict.cxx TSpegPhysicsDict_rdict.pcm TSpegPhysics.rootmap COMMAND ../scripts/build_dict.sh TSpegPhysics.h TSpegPhysicsDict.cxx TSpegPhysics.rootmap libNPSpeg.dylib DEPENDS TSpegPhysics.h)
add_custom_command(OUTPUT TSpegPlasticDataDict.cxx TSpegPlasticDataDict_rdict.pcm TSpegPlasticData.rootmap COMMAND ../scripts/build_dict.sh TSpegPlasticData.h TSpegPlasticDataDict.cxx TSpegPlasticData.rootmap libNPSpeg.dylib DEPENDS TSpegPlasticData.h)
add_custom_command(OUTPUT TSpegDCDataDict.cxx TSpegDCDataDict_rdict.pcm TSpegDCData.rootmap COMMAND ../scripts/build_dict.sh TSpegDCData.h TSpegDCDataDict.cxx TSpegDCData.rootmap libNPSpeg.dylib DEPENDS TSpegDCData.h)
add_custom_command(OUTPUT TSpegCHIODataDict.cxx TSpegCHIODataDict_rdict.pcm TSpegCHIOData.rootmap COMMAND ../scripts/build_dict.sh TSpegCHIOData.h TSpegCHIODataDict.cxx TSpegCHIOData.rootmap libNPSpeg.dylib DEPENDS TSpegCHIOData.h)
add_library(NPSpeg SHARED TSpegCHIOData.cxx TSpegDCData.cxx TSpegPlasticData.cxx TSpegPhysics.cxx TSpegCHIODataDict.cxx TSpegDCDataDict.cxx TSpegPlasticDataDict.cxx TSpegPhysicsDict.cxx )
target_link_libraries(NPSpeg ${ROOT_LIBRARIES} NPCore) 
install(FILES TSpegCHIOData.h TSpegDCData.h TSpegPlasticData.h TSpegPhysics.h DESTINATION ${CMAKE_INCLUDE_OUTPUT_DIRECTORY})

install(FILES TSpegCHIOData.rootmap DESTINATION ${CMAKE_LIBRARY_OUTPUT_DIRECTORY})
install(FILES TSpegDCData.rootmap DESTINATION ${CMAKE_LIBRARY_OUTPUT_DIRECTORY})
install(FILES TSpegPlasticData.rootmap DESTINATION ${CMAKE_LIBRARY_OUTPUT_DIRECTORY})
install(FILES TSpegPhysics.rootmap DESTINATION ${CMAKE_LIBRARY_OUTPUT_DIRECTORY})
install(FILES TSpegCHIODataDict_rdict.pcm DESTINATION ${CMAKE_LIBRARY_OUTPUT_DIRECTORY})
install(FILES TSpegDCDataDict_rdict.pcm DESTINATION ${CMAKE_LIBRARY_OUTPUT_DIRECTORY})
install(FILES TSpegPlasticDataDict_rdict.pcm DESTINATION ${CMAKE_LIBRARY_OUTPUT_DIRECTORY})
install(FILES TSpegPhysicsDict_rdict.pcm DESTINATION ${CMAKE_LIBRARY_OUTPUT_DIRECTORY})
install(FILES TSpegCHIODataDict_rdict.pcm DESTINATION ${CMAKE_LIBRARY_OUTPUT_DIRECTORY})
install(FILES TSpegDCDataDict_rdict.pcm DESTINATION ${CMAKE_LIBRARY_OUTPUT_DIRECTORY})
install(FILES TSpegPlasticDataDict_rdict.pcm DESTINATION ${CMAKE_LIBRARY_OUTPUT_DIRECTORY})
install(FILES TSpegPhysicsDict_rdict.pcm DESTINATION ${CMAKE_LIBRARY_OUTPUT_DIRECTORY})
